<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>Adlerweg Etappe 12</title>

    <link rel="stylesheet" href="js/leaflet/leaflet.css" />
    <link rel="stylesheet" href="js/leaflet-elevation/leaflet.elevation-0.0.4.css" />
    <script src="js/leaflet/leaflet.js"></script>
    <script src="js/leaflet-hash/leaflet-hash.js"></script>
    <script src="js/leaflet-elevation/leaflet.elevation-0.0.4.min.js"></script>
    <script src="https://d3js.org/d3.v3.min.js" charset="Utf-8"></script>
    <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>


    <style>
        body {
            padding: 0px;
            margin: 0px;
        }

        html,
        body,
        #map {
            height: 100vh;
            width: 100vw;
        }

        #map {
            height: 600px;
            width: 1024px;
        }
    </style>
</head>

<body>
    <h3> Adlerweg Etappe 12: Hallerangerhaus – Nordkette Innsbruck </h3>
    <p> Diese Etappe führt vom Hallerangerhaus zum Hafelekar auf der Innsbrucker Nordkette. Der Weg dorthin führt am „Zugspitzblick“ vorbei, wo man bei schönem Wetter einen Blick auf Deutschlands höchsten Berg erhaschen kann. Am Hafelekar wartet dann noch der einzigartige Blick auf die Landeshauptstadt. Insidertipp: Die Bar John Montagu in der Höttinger Gasse eignet sich hervorragend für einen kleinen Snack nach dieser anstrengenden Etappe. </p>
    <a href="http://www.tirol.at/reisefuehrer/sport/wandern/adlerweg">Adlerweg und seine Etappen</a>
    </p>
    <div id="map"></div>

    <script>
        // WMTS-Layer basemap.at - Quelle: http://www.basemap.at/wmts/1.0.0/WMTSCapabilities.xml
        var layers = {
            geolandbasemap: L.tileLayer("https://{s}.wien.gv.at/basemap/geolandbasemap/normal/google3857/{z}/{y}/{x}.png", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            bmapgrau: L.tileLayer("https://{s}.wien.gv.at/basemap/bmapgrau/normal/google3857/{z}/{y}/{x}.png", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            bmapoverlay: L.tileLayer("https://{s}.wien.gv.at/basemap/bmapoverlay/normal/google3857/{z}/{y}/{x}.png", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            bmaphidpi: L.tileLayer("https://{s}.wien.gv.at/basemap/bmaphidpi/normal/google3857/{z}/{y}/{x}.jpeg", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            bmaporthofoto30cm: L.tileLayer("https://{s}.wien.gv.at/basemap/bmaporthofoto30cm/normal/google3857/{z}/{y}/{x}.jpeg", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            osm: L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                subdomains: ['a', 'b', 'c'],
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
            })
        };

        // Map definieren
        var map = L.map('map', {
            layers: [layers.geolandbasemap],
            center: [47.2690,11.3949],
            zoom: 12
        });

        // Maßstab hinzufügen
        L.control.scale({
            maxWidth: 200,
            metric: true,
            imperial: false
        }).addTo(map);

        // WMTS-Layer Auswahl hinzufügen
        var layerControl = L.control.layers({
            "basemap.at - STANDARD": layers.geolandbasemap,
            "basemap.at - GRAU": layers.bmapgrau,
            "basemap.at - OVERLAY": layers.bmapoverlay,
            "basemap.at - HIGH-DPI": layers.bmaphidpi,
            "basemap.at - ORTHOFOTO": layers.bmaporthofoto30cm,
            "OpenStreetMap": layers.osm,
        }).addTo(map);

        // leaflet-hash aktivieren
        var hash = new L.Hash(map);

        omnivore.gpx('data/AdlerwegEtappe12.gpx').addTo(map).addTo(map);

        var el = L.control.elevation();
        //el.addTo(map);

        //L.geoJSON(window.etappe12, {
        //onEachFeature: el.addData.bind(el)
        //}).addTo(map);

        var huts = [
            L.marker([47.35477, 11.47718], {
                title: "Hallerangerhaus",
                icon: L.icon({
                    iconUrl: 'icons/hut.png'
                })
            }),
            L.marker([47.33002, 11.42559], {
                title: "Pfeishütte",
                icon: L.icon({
                    iconUrl: 'icons/hut.png'
                })
            }),
            L.marker([47.31202, 11.38101], {
                title: "Bergstation Hafelekar",
                icon: L.icon({
                    iconUrl: 'icons/hut.png'
                })
            }),

        ];

        var hutsLayer = L.featureGroup();
        for (var i = 0; i < huts.length; i++) {
            hutsLayer.addLayer(huts[i]);
        }

        var el = L.control.elevation({
            position: "topright",
            theme: "steelblue-theme", //default: lime-theme
            width: 600,
            height: 125,
            margins: {
                top: 10,
                right: 20,
                bottom: 30,
                left: 50
            },
            useHeightIndicator: true, //if false a marker is drawn at map position
            interpolation: "linear", //see https://github.com/mbostock/d3/wiki/SVG-Shapes#wiki-area_interpolate
            hoverNumber: {
                decimalsX: 3, //decimals on distance (always in km)
                decimalsY: 0, //deciamls on hehttps://www.npmjs.com/package/leaflet.coordinatesight (always in m)
                formatter: undefined //custom formatter function may be injected
            },
            xTicks: undefined, //number of ticks in x axis, calculated by default according to width
            yTicks: undefined, //number of ticks on y axis, calculated by default according to height
            collapsed: false, //collapsed mode, show chart on click or mouseover
            imperial: false //display imperial units instead of metric
        });

        //Höhenprofil

        var profileControl = L.control.elevation({
            position: 'bottomright',
            theme: 'steelblue-theme'
        });
        profileControl.addTo(map);

        gpxTrack = omnivore.gpx('Data/AdlerwegEtappe12.gpx').addTo(map);

        // nach erfolgreichem Laden Popup hinzufügen, Ausschnitt setzen und Höhenprofil erzeugen
        gpxTrack.on('ready', function() {


            // Popup hinzufügen
            var mark = '<h3>Adlerweg Etappe 12: Hallerangerhaus –  Nordkette Innsbruck</h3>';
            markup += '<li>Ausgangspunkt: Hallerangerhaus</li>';
            markup += '<li>Endpunkt: Innsbruck</li>';
            markup += '<li>Höhenmeter bergauf: 1150</li>';
            markup += '<li>Höhenmeter bergab: 970</li>';
            markup += '<li>Höchster Punkt: 2280</li>';
            markup += '<li>Schwierigkeitsgrad: schwierig</li>';
            markup += '<li>Streckenlänge (in km): 13</li>';
            markup += '<li>Gehzeit (in Stunden): 5,5</li>';
            markup += '<li>Einkehrmöglichkeiten: Hallerangerhaus, Pfeishütte, Bergstation Hafelekar</li>';
            markup += '<li><a href="http://www.tirol.at/reisefuehrer/sport/wandern/wandertouren/a-adlerweg-etappe-12-hallerangerhaus-nordkette-innsbruck">Weitere Infos</a></li>';
            gpxTrack.bindPopup(mark, {
                maxWidth: 480
            });

            // Ausschnitt setzen
            map.fitBounds(gpxTrack.getBounds());

            // Höhenprofil erzeugen
            gpxTrack.eachLayer(function(layer) {
                profileControl.addData(layer.feature);
            });
        });

        var start = L.marker([47.35476, 11.47711], {
            title: 'Start',
            icon: L.icon({
                iconUrl: 'icons/hiking.png',
                iconAnchor: [14, 34]
            })
        }).addTo(map);

        var ziel = L.marker([47.27093, 11.39542], {
            title: 'Ziel',
            icon: L.icon({
                iconUrl: 'icons/finish.png',
                iconAnchor: [14, 34]
            })
        }).addTo(map);

        var adlerblickSeegrube = L.marker([47.3062, 11.3799], {
            title: 'Seegrube Adlerblick',
            icon: L.icon({
                iconUrl: 'icons/panoramicview.png',
                iconAnchor: [14, 34]
            })
        }).addTo(map);

        var adlerblickSeegrube = L.marker([47.31185, 11.38376], {
            title: 'Hafelekar Adlerblick',
            icon: L.icon({
                iconUrl: 'icons/panoramicview.png',
                iconAnchor: [14, 34]
            })
        }).addTo(map);



        map.on("zoomend", function() {
            if (map.getZoom() >= 15) {
                map.addLayer(hutsLayer);
            } else {
                map.removeLayer(hutsLayer);
            }

        });

        hutsLayer.addTo(map);
    </script>

    <a href="https://github.com/csap6803/csap6803.github.io">Designer</a>
</body>

</html>